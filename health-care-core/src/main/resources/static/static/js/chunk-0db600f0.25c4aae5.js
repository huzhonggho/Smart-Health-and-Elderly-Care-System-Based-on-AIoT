(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0db600f0"],{1593:function(e,t,a){"use strict";var i=a("c7eb"),r=a("1da1"),l=a("2f7b"),o=function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(t,a,r){var l,o,n,s,c;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r;case 2:if(l=e.sent,o=l.componentInstance,n=a.value,o.height){e.next=7;break}throw new Error("el-$table must set the height. Such as height='100px'");case 7:if(s=n&&n.bottomOffset||30,o){e.next=10;break}return e.abrupt("return");case 10:c=window.innerHeight-t.getBoundingClientRect().top-s,o.layout.setHeight(c),o.doLayout();case 13:case"end":return e.stop()}}),e)})));return function(t,a,i){return e.apply(this,arguments)}}(),n={bind:function(e,t,a){e.resizeListener=Object(r["a"])(Object(i["a"])().mark((function r(){return Object(i["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,o(e,t,a);case 2:case"end":return i.stop()}}),r)}))),Object(l["a"])(window.document.body,e.resizeListener),Object(l["a"])(e,e.resizeListener)},inserted:function(e,t,a){return Object(r["a"])(Object(i["a"])().mark((function r(){return Object(i["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,o(e,t,a);case 2:case"end":return i.stop()}}),r)})))()},componentUpdated:function(e,t,a){return Object(r["a"])(Object(i["a"])().mark((function r(){return Object(i["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,o(e,t,a);case 2:case"end":return i.stop()}}),r)})))()},unbind:function(e){Object(l["b"])(e,e.resizeListener)}},s=function(e){e.directive("adaptive",n)};window.Vue&&(window["adaptive"]=n,Vue.use(s)),n.install=s;t["a"]=n},1670:function(e,t,a){},1824:function(e,t,a){"use strict";a("3c5a")},"1c67":function(e,t,a){},2214:function(e,t,a){"use strict";a("34e2")},"34e2":function(e,t,a){},"3c5a":function(e,t,a){},"5f6e":function(e,t,a){"use strict";a("791b")},6090:function(e,t,a){},"70d5":function(e,t,a){"use strict";a("6090")},"791b":function(e,t,a){},ac6b:function(e,t,a){"use strict";a("1670")},b468:function(e,t,a){"use strict";a("1c67")},c885:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"Title"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}}}),e._v("考虑到数据较多,此处需要对接后端搜索,后期需要分页 "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"adaptive",rawName:"v-adaptive",value:{bottomOffset:40},expression:"{ bottomOffset: 40 }"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"100px"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"商户编号"}},[a("span",[e._v(e._s(t.row.sid))])]),a("el-form-item",{attrs:{label:"商户名称"}},[a("span",[e._v(e._s(t.row.merchant))])]),a("el-form-item",{attrs:{label:"负责人"}},[a("span",[e._v(e._s(t.row.charger))])]),a("el-form-item",{attrs:{label:"问题描述"}},[a("span",[e._v(e._s(t.row.question))])]),a("el-form-item",{attrs:{label:"是否有证"}},[a("span",[e._v(e._s(t.row.pass))])]),a("el-form-item",{attrs:{label:"是否合格"}},[a("span",[e._v(e._s(t.row.qualified))])]),a("el-form-item",{attrs:{label:"检查人"}},[a("span",[e._v(e._s(t.row.frontman))])]),a("el-form-item",{attrs:{label:"记录人"}},[a("span",[e._v(e._s(t.row.recordman))])])],1)]}}])}),a("el-table-column",{attrs:{label:"商户编号",prop:"mid"}}),a("el-table-column",{attrs:{label:"商户名称",prop:"merchant"}}),a("el-table-column",{attrs:{label:"负责人",prop:"charger"}}),a("el-table-column",{attrs:{label:"问题描述",prop:"question"}}),a("el-table-column",{attrs:{label:"是否有证",prop:"pass"}}),a("el-table-column",{attrs:{label:"是否合格",prop:"qualified"}}),a("el-table-column",{attrs:{label:"检查人",prop:"frontman"}}),a("el-table-column",{attrs:{label:"记录人",prop:"recordman"}}),a("el-table-column",{attrs:{align:"left",fixed:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v(" 编辑")]),a("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定要删除该记录吗？"},on:{onConfirm:function(a){return e.deleteitem(t.$index,t.row)}}},[a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除 ")])],1)]}}])})],1),a("el-dialog",{attrs:{title:"编辑",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"supervisionEditForm",attrs:{model:e.formData,rules:e.rules,"label-position":"left","label-width":"80px",size:"medium"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"商户编号",prop:"mid"}},[a("el-input",{attrs:{readonly:!1,type:"text",clearable:""},model:{value:e.formData.mid,callback:function(t){e.$set(e.formData,"mid",t)},expression:"formData.mid"}})],1),a("el-form-item",{attrs:{label:"商户名称",prop:"merchant"}},[a("el-input",{attrs:{type:"text",clearable:""},model:{value:e.formData.merchant,callback:function(t){e.$set(e.formData,"merchant",t)},expression:"formData.merchant"}})],1),a("el-form-item",{attrs:{label:"负责人",prop:"charger"}},[a("el-input",{attrs:{type:"text",clearable:"",minlength:2,maxlength:17},model:{value:e.formData.charger,callback:function(t){e.$set(e.formData,"charger",t)},expression:"formData.charger"}})],1),a("el-form-item",{attrs:{label:"问题描述",prop:"question"}},[a("el-input",{attrs:{type:"textarea",rows:"3","show-word-limit":!0},model:{value:e.formData.question,callback:function(t){e.$set(e.formData,"question",t)},expression:"formData.question"}})],1),a("el-form-item",{attrs:{label:"图片",prop:"pic"}},[a("el-upload",{attrs:{action:"http://82.157.131.17/api/v1/upload","file-list":e.picFileList,headers:e.picUploadHeaders,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,data:e.picUploadData,"list-type":"picture-card","show-file-list":"",limit:9},scopedSlots:e._u([{key:"default",fn:function(){return[a("i",{staticClass:"el-icon-plus"})]},proxy:!0}])})],1),a("el-form-item",{attrs:{label:"是否有证",prop:"pass"}},[a("el-radio-group",{model:{value:e.formData.pass,callback:function(t){e.$set(e.formData,"pass",t)},expression:"formData.pass"}},e._l(e.passOptions,(function(t,i){return a("el-radio",{key:i,staticStyle:{"{\n                    display":"inline"},attrs:{label:t.value,disabled:t.disabled}},[e._v(" "+e._s(t.label)+" ")])})),1)],1),a("el-form-item",{attrs:{label:"是否合格",prop:"qualified"}},[a("el-radio-group",{model:{value:e.formData.qualified,callback:function(t){e.$set(e.formData,"qualified",t)},expression:"formData.qualified"}},e._l(e.qualifiedOptions,(function(t,i){return a("el-radio",{key:i,staticStyle:{"{\n                    display":"inline"},attrs:{label:t.value,disabled:t.disabled}},[e._v(" "+e._s(t.label)+" ")])})),1)],1),a("el-form-item",{attrs:{label:"检查人",prop:"frontman"}},[a("el-input",{attrs:{type:"text",clearable:"",minlength:2,maxlength:17},model:{value:e.formData.frontman,callback:function(t){e.$set(e.formData,"frontman",t)},expression:"formData.frontman"}})],1),a("el-form-item",{attrs:{label:"记录人",prop:"recordman"}},[a("el-input",{attrs:{type:"text",clearable:"",minlength:2,maxlength:17},model:{value:e.formData.recordman,callback:function(t){e.$set(e.formData,"recordman",t)},expression:"formData.recordman"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v(" 确 定")])],1),a("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1)},r=[],l=a("ade3"),o=(a("e9c4"),a("a434"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"vForm",attrs:{model:e.formData,rules:e.rules,"label-position":"left","label-width":"80px",size:"medium"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"商户编号",prop:"mid"}},[a("el-input",{attrs:{readonly:"false",type:"text",clearable:""},model:{value:e.formData.mid,callback:function(t){e.$set(e.formData,"mid",t)},expression:"formData.mid"}})],1),a("el-form-item",{attrs:{label:"商户名称",prop:"merchant"}},[a("el-input",{attrs:{type:"text",clearable:""},model:{value:e.formData.merchant,callback:function(t){e.$set(e.formData,"merchant",t)},expression:"formData.merchant"}})],1),a("el-form-item",{attrs:{label:"负责人",prop:"charger"}},[a("el-input",{attrs:{type:"text",clearable:"",minlength:2,maxlength:17},model:{value:e.formData.charger,callback:function(t){e.$set(e.formData,"charger",t)},expression:"formData.charger"}})],1),a("el-form-item",{attrs:{label:"问题描述",prop:"question"}},[a("el-input",{attrs:{type:"textarea",rows:"3","show-word-limit":!0},model:{value:e.formData.question,callback:function(t){e.$set(e.formData,"question",t)},expression:"formData.question"}})],1),a("el-form-item",{attrs:{label:"图片",prop:"pic"}},[a("el-upload",{attrs:{"file-list":e.picFileList,headers:e.picUploadHeaders,data:e.picUploadData,"list-type":"picture-card","show-file-list":"",limit:3},scopedSlots:e._u([{key:"default",fn:function(){return[a("i",{staticClass:"el-icon-plus"})]},proxy:!0}])})],1),a("el-form-item",{attrs:{label:"是否有证",prop:"pass"}},[a("el-radio-group",{model:{value:e.formData.pass,callback:function(t){e.$set(e.formData,"pass",t)},expression:"formData.pass"}},e._l(e.passOptions,(function(t,i){return a("el-radio",{key:i,staticStyle:{"{display":"inline}"},attrs:{label:t.value,disabled:t.disabled}},[e._v(e._s(t.label))])})),1)],1),a("el-form-item",{attrs:{label:"是否合格",prop:"qualified"}},[a("el-radio-group",{model:{value:e.formData.qualified,callback:function(t){e.$set(e.formData,"qualified",t)},expression:"formData.qualified"}},e._l(e.qualifiedOptions,(function(t,i){return a("el-radio",{key:i,staticStyle:{"{display":"inline}"},attrs:{label:t.value,disabled:t.disabled}},[e._v(e._s(t.label))])})),1)],1),a("el-form-item",{attrs:{label:"检查人",prop:"frontman"}},[a("el-input",{attrs:{type:"text",clearable:"",minlength:2,maxlength:17},model:{value:e.formData.frontman,callback:function(t){e.$set(e.formData,"frontman",t)},expression:"formData.frontman"}})],1),a("el-form-item",{attrs:{label:"记录人",prop:"recordman"}},[a("el-input",{attrs:{type:"text",clearable:"",minlength:2,maxlength:17},model:{value:e.formData.recordman,callback:function(t){e.$set(e.formData,"recordman",t)},expression:"formData.recordman"}})],1)],1)}),n=[],s={components:{},props:{},data:function(){return{formData:{mid:"",merchant:"",charger:"",question:"",pic:null,pass:1,qualified:1,frontman:"",recordman:""},rules:{mid:[{pattern:/^\d+(\.\d+)?$/,trigger:["blur","change"],message:""}]},passOptions:[{label:"有",value:1},{label:"无",value:2}],qualifiedOptions:[{label:"合格",value:1},{label:"不合格",value:2}],picFileList:[],picUploadHeaders:{},picUploadData:{}}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{submitForm:function(){this.$refs["vForm"].validate((function(e){}))},resetForm:function(){this.$refs["vForm"].resetFields()}}},c=s,u=(a("b468"),a("ac6b"),a("2877")),m=Object(u["a"])(c,o,n,!1,null,"f5d3d838",null),f=m.exports,p=a("b775");function d(){return Object(p["a"])({url:"/supervision/getAll",method:"get",params:{}})}function b(e){return Object(p["a"])({url:"/supervision/edit",method:"post",data:e})}var h=a("1593"),g=parseInt(window.innerHeight),v={components:{SupervisionEditForm:f},directives:{adaptive:h["a"]},data:function(){var e;return e={submitPicForm:[],dialogImageUrl:"",dialogVisible:!1,link:"",name:"",windowHeight:g,loading:!1},Object(l["a"])(e,"dialogVisible",!1),Object(l["a"])(e,"autoHeight",{height:""}),Object(l["a"])(e,"tableData",[{}]),Object(l["a"])(e,"dialogFormVisible",!1),Object(l["a"])(e,"form",{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}),Object(l["a"])(e,"formLabelWidth","120px"),Object(l["a"])(e,"formData",{mid:"",merchant:"",charger:"",question:"",pic:null,pass:1,qualified:1,frontman:"",recordman:""}),Object(l["a"])(e,"rules",{mid:[{pattern:/^\d+(\.\d+)?$/,trigger:["blur","change"],message:""}]}),Object(l["a"])(e,"passOptions",[{label:"有",value:1},{label:"无",value:0}]),Object(l["a"])(e,"qualifiedOptions",[{label:"合格",value:1},{label:"不合格",value:0}]),Object(l["a"])(e,"picFileList",[]),Object(l["a"])(e,"picUploadHeaders",{}),Object(l["a"])(e,"picUploadData",{}),e},methods:{handleEdit:function(e,t){this.picFileList=[],this.submitPicForm=[],console.log(e,t),this.formData=JSON.parse(JSON.stringify(t)),"是"==this.formData.pass?this.formData.pass=1:this.formData.pass=0,"是"==this.formData.qualified?this.formData.qualified=1:this.formData.qualified=0,this.dialogFormVisible=!0,console.log(this.formData);for(var a=JSON.parse(t.imgs),i=0;i<a.length;i++)this.submitPicForm.push(a[i]),this.picFileList.push({name:"test.jpg",url:a[i]})},handleDelete:function(e,t){console.log(e,t)},submitForm:function(){var e=this;this.$refs["supervisionEditForm"].validate((function(t){if(t){e.formData.imgs=e.submitPicForm;var a=JSON.parse(JSON.stringify(e.formData));a.imgs=JSON.stringify(a.imgs),console.log(a),b(a).then((function(t){"200"==t.code&&(e.dialogFormVisible=!1,e.getAllData(),e.$message({message:"修改成功",type:"success"}))}))}}))},resetForm:function(){this.$refs["supervisionEditForm"].resetFields()},handleRemove:function(e,t){console.log(e);for(var a=0;a<this.submitPicForm.length;a++)if(e.hasOwnProperty("raw")){if(e.response.data.links.url==this.submitPicForm[a]){this.submitPicForm.splice(a,1),console.log(this.submitPicForm);break}}else if(e.url==this.submitPicForm[a]){this.submitPicForm.splice(a,1),console.log(this.submitPicForm);break}},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleSuccess:function(e,t,a){this.submitPicForm.push(t.response.data.links.url),console.log(this.submitPicForm)},getAllData:function(){var e=this;d().then((function(t){console.log(t),e.tableData=t.data,e.loading=!1;for(var a=0;a<e.tableData.length;a++)1==e.tableData[a].pass?e.tableData[a].pass="是":e.tableData[a].pass="否",1==e.tableData[a].qualified?e.tableData[a].qualified="是":e.tableData[a].qualified="否"}))}},created:function(){this.loading=!0,this.getAllData()}},D=v,x=(a("1824"),a("2214"),a("5f6e"),a("70d5"),Object(u["a"])(D,i,r,!1,null,"62ef500e",null));t["default"]=x.exports},e9c4:function(e,t,a){var i=a("23e7"),r=a("d066"),l=a("d039"),o=r("JSON","stringify"),n=/[\uD800-\uDFFF]/g,s=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,u=function(e,t,a){var i=a.charAt(t-1),r=a.charAt(t+1);return s.test(e)&&!c.test(r)||c.test(e)&&!s.test(i)?"\\u"+e.charCodeAt(0).toString(16):e},m=l((function(){return'"\\udf06\\ud834"'!==o("\udf06\ud834")||'"\\udead"'!==o("\udead")}));o&&i({target:"JSON",stat:!0,forced:m},{stringify:function(e,t,a){var i=o.apply(null,arguments);return"string"==typeof i?i.replace(n,u):i}})}}]);